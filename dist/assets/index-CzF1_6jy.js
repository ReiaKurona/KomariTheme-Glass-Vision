import{r as h,a as te,R as P}from"./vendor-wGySg1uH.js";import{m as y,A as $}from"./motion-AaAnZByc.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&t(d)}).observe(document,{childList:!0,subtree:!0});function c(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(n){if(n.ep)return;n.ep=!0;const a=c(n);fetch(n.href,a)}})();var W={exports:{}},E={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var se=h,ae=Symbol.for("react.element"),ie=Symbol.for("react.fragment"),le=Object.prototype.hasOwnProperty,ne=se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ce={key:!0,ref:!0,__self:!0,__source:!0};function B(s,l,c){var t,n={},a=null,d=null;c!==void 0&&(a=""+c),l.key!==void 0&&(a=""+l.key),l.ref!==void 0&&(d=l.ref);for(t in l)le.call(l,t)&&!ce.hasOwnProperty(t)&&(n[t]=l[t]);if(s&&s.defaultProps)for(t in l=s.defaultProps,l)n[t]===void 0&&(n[t]=l[t]);return{$$typeof:ae,type:s,key:a,ref:d,props:n,_owner:ne.current}}E.Fragment=ie;E.jsx=B;E.jsxs=B;W.exports=E;var e=W.exports,T={},U=te;T.createRoot=U.createRoot,T.hydrateRoot=U.hydrateRoot;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var re={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),f=(s,l)=>{const c=h.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:d,className:o="",children:m,...r},i)=>h.createElement("svg",{ref:i,...re,width:n,height:n,stroke:t,strokeWidth:d?Number(a)*24/Number(n):a,className:["lucide",`lucide-${oe(s)}`,o].join(" "),...r},[...l.map(([u,p])=>h.createElement(u,p)),...Array.isArray(m)?m:[m]]));return c.displayName=`${s}`,c};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=f("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=f("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=f("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=f("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=f("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=f("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=f("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=f("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=f("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=f("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=f("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=f("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=f("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=f("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=f("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=f("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=f("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=f("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=f("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=f("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=f("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=f("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=f("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=f("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Q=h.createContext(void 0);function ve({children:s}){const[l,c]=h.useState({}),[t,n]=h.useState(null),[a,d]=h.useState(!0);h.useEffect(()=>{o()},[]);const o=async()=>{try{const i=await(await fetch("/api/public")).json();i.status==="success"&&(n(i.data),i.data.theme_settings&&c(i.data.theme_settings))}catch(r){console.error("Failed to fetch theme settings:",r)}finally{d(!1)}},m=r=>{c(i=>({...i,...r}))};return h.useEffect(()=>{const r=document.documentElement,i={蓝色:"theme-blue",紫色:"theme-purple",绿色:"theme-green",橙色:"theme-orange",粉色:"theme-pink",青色:"theme-cyan"},u=i[l.theme_color||"蓝色"]||"theme-blue";Object.values(i).forEach(p=>{document.body.classList.remove(p)}),document.body.classList.add(u),r.style.setProperty("--glass-opacity",String(l.glass_opacity??20)),r.style.setProperty("--glass-blur",`${l.glass_blur??16}px`),r.style.setProperty("--card-radius",`${l.card_radius??24}px`),document.body.style.display="none",document.body.offsetHeight,document.body.style.display=""},[l]),e.jsx(Q.Provider,{value:{themeSettings:l,updateThemeSettings:m,publicConfig:t,isLoading:a},children:s})}function M(){const s=h.useContext(Q);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s}function A(){const[s,l]=h.useState([]),[c,t]=h.useState({}),[n,a]=h.useState(!0),[d,o]=h.useState(null),[m,r]=h.useState(!1),[i,u]=h.useState(!1);h.useEffect(()=>{p();const x=k(),w=()=>{console.log("Network reconnected, reestablishing connections..."),p(),x(),k()};return window.addEventListener("online",w),()=>{window.removeEventListener("online",w),x()}},[]);const p=async()=>{try{const w=await(await fetch("/api/nodes")).json();w.status==="success"?l(w.data):o(w.message||"Failed to fetch nodes")}catch(x){o("Network error while fetching nodes"),console.error("Error fetching nodes:",x)}finally{a(!1)}},k=()=>{let x=null,w=null,g=null,v=0;const b=10,N=()=>{try{const ee=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/clients`;x=new WebSocket(ee),x.onopen=()=>{console.log("WebSocket connected"),r(!0),u(!1),v=0,x==null||x.send("get"),w=window.setInterval(()=>{(x==null?void 0:x.readyState)===WebSocket.OPEN&&x.send("get")},3e3)},x.onmessage=S=>{try{const _=JSON.parse(S.data);_.status==="success"&&_.data&&(t(_.data.data||{}),o(null))}catch(_){console.error("Error parsing WebSocket message:",_)}},x.onclose=S=>{if(console.log("WebSocket disconnected:",S.code,S.reason),r(!1),w&&(window.clearInterval(w),w=null),v<b){u(!0);const _=Math.min(1e3*Math.pow(2,v),3e4);console.log(`Attempting to reconnect in ${_}ms... (attempt ${v+1}/${b})`),g=window.setTimeout(()=>{v++,N()},_)}else console.error("Max reconnection attempts reached"),u(!1),o("连接已断开，请刷新页面重试")},x.onerror=S=>{console.error("WebSocket error:",S),r(!1)}}catch(C){console.error("Failed to create WebSocket:",C),o("无法建立连接")}};return N(),()=>{g&&window.clearTimeout(g),w&&window.clearInterval(w),x&&x.close()}};return{nodes:s,nodeStatuses:c,isLoading:n,error:d,wsConnected:m,isReconnecting:i,refetch:p}}function Ne(s,l=24){const[c,t]=h.useState([]),[n,a]=h.useState(!1),[d,o]=h.useState(null);return h.useEffect(()=>{if(!s)return;(async()=>{a(!0),o(null);try{const i=await(await fetch(`/api/records/load?uuid=${s}&hours=${l}`)).json();i.status==="success"?t(i.data.records||[]):o(i.message||"Failed to fetch history")}catch(r){o("Network error while fetching history"),console.error("Error fetching node history:",r)}finally{a(!1)}})()},[s,l]),{data:c,isLoading:n,error:d}}function j(s){if(s===0)return"0 B";const l=1024,c=["B","KB","MB","GB","TB"],t=Math.floor(Math.log(s)/Math.log(l));return parseFloat((s/Math.pow(l,t)).toFixed(1))+" "+c[t]}function R(s){const l=Math.floor(s/86400),c=Math.floor(s%86400/3600),t=Math.floor(s%3600/60);return l>0?`${l}天${c}时`:c>0?`${c}时${t}分`:`${t}分钟`}function z(s){return s?"bg-green-400 shadow-green-400/50 shadow-lg":"bg-red-400 shadow-red-400/50 shadow-lg"}function L(s){return s>=90?"text-red-400":s>=70?"text-yellow-400":"text-green-400"}function F({node:s,onClick:l,variant:c}){var p;const{nodeStatuses:t}=A(),{themeSettings:n}=M(),a=t[s.uuid],d=!!a,o=((p=a==null?void 0:a.cpu)==null?void 0:p.usage)||0,m=a?a.ram.used/a.ram.total*100:0,r=a?a.disk.used/a.disk.total*100:0,i={borderRadius:`${n.card_radius||24}px`,"--glass-blur":`${n.glass_blur||16}px`,"--glass-opacity-high":(n.glass_opacity||20)/100*.25,"--glass-opacity-low":(n.glass_opacity||20)/100*.1},u=n.enable_animations!==!1&&!n.performance_mode?"liquid-animation":"";return c==="table"?e.jsx(y.div,{className:`glass-card p-4 cursor-pointer transition-all duration-300 hover:scale-[1.02] ${u}`,style:i,onClick:l,whileHover:{y:-2},whileTap:{scale:.98},children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center text-sm",children:[e.jsxs("div",{className:"col-span-3 flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${z(d)}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:s.name}),e.jsx("div",{className:"text-white/60 text-xs",children:s.region})]})]}),e.jsxs("div",{className:"col-span-2 text-center",children:[e.jsxs("div",{className:"text-white font-medium",children:[o.toFixed(1),"%"]}),e.jsx("div",{className:"text-white/60 text-xs",children:"CPU"})]}),e.jsxs("div",{className:"col-span-2 text-center",children:[e.jsxs("div",{className:"text-white font-medium",children:[m.toFixed(1),"%"]}),e.jsx("div",{className:"text-white/60 text-xs",children:"内存"})]}),e.jsxs("div",{className:"col-span-2 text-center",children:[e.jsxs("div",{className:"text-white font-medium",children:[r.toFixed(1),"%"]}),e.jsx("div",{className:"text-white/60 text-xs",children:"磁盘"})]}),e.jsxs("div",{className:"col-span-2 text-center",children:[e.jsx("div",{className:"text-white font-medium",children:a?`${j(a.network.up)}/s`:"--"}),e.jsx("div",{className:"text-white/60 text-xs",children:"上行"})]}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx("div",{className:"text-white/60 text-xs",children:a?R(a.uptime):"--"})})]})}):c==="compact"?e.jsx(y.div,{className:`glass-card p-4 cursor-pointer transition-all duration-300 hover:scale-[1.02] ${u}`,style:i,onClick:l,whileHover:{y:-2},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${z(d)}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:s.name}),e.jsx("div",{className:"text-white/60 text-sm",children:s.region})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-white font-medium",children:[o.toFixed(1),"%"]}),e.jsx("div",{className:"text-white/60 text-xs",children:"CPU"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-white font-medium",children:[m.toFixed(1),"%"]}),e.jsx("div",{className:"text-white/60 text-xs",children:"RAM"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-white font-medium",children:[r.toFixed(1),"%"]}),e.jsx("div",{className:"text-white/60 text-xs",children:"DISK"})]})]})]})}):e.jsxs(y.div,{className:`glass-card p-6 cursor-pointer transition-all duration-300 hover:scale-[1.02] ${u}`,style:i,onClick:l,whileHover:{y:-4},whileTap:{scale:.98},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${z(d)}`}),e.jsx("h3",{className:"font-semibold text-white truncate",children:s.name})]}),e.jsx("div",{className:"text-white/60 text-sm",children:s.region})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-white/80 text-sm",children:[e.jsx(X,{size:16}),e.jsx("span",{children:s.os})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-white/80 text-sm",children:[e.jsx(Y,{size:16}),e.jsxs("span",{children:[s.cpu_cores," 核 ",s.cpu_name]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(O,{size:14,className:"text-white/60"}),e.jsx("span",{className:"text-white/60 text-xs",children:"CPU"})]}),e.jsxs("div",{className:"text-white font-semibold",children:[o.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(I,{size:14,className:"text-white/60"}),e.jsx("span",{className:"text-white/60 text-xs",children:"内存"})]}),e.jsxs("div",{className:"text-white font-semibold",children:[m.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(G,{size:14,className:"text-white/60"}),e.jsx("span",{className:"text-white/60 text-xs",children:"磁盘"})]}),e.jsxs("div",{className:"text-white font-semibold",children:[r.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(O,{size:14,className:"text-white/60"}),e.jsx("span",{className:"text-white/60 text-xs",children:"网络"})]}),e.jsx("div",{className:"text-white font-semibold text-xs",children:a?e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{children:["↑",j(a.network.up),"/s"]}),e.jsxs("div",{children:["↓",j(a.network.down),"/s"]})]}):"--"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-white/60 pt-3 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(K,{size:12}),e.jsx("span",{children:a?R(a.uptime):"离线"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Z,{size:12}),e.jsx("span",{children:s.group||"默认"})]})]})]})}function ke({nodes:s,onNodeClick:l}){return e.jsx(y.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:s.map((c,t)=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:t*.1,ease:"easeOut"},children:e.jsx(F,{node:c,onClick:()=>l(c.uuid),variant:"grid"})},c.uuid))})}function _e({nodes:s,onNodeClick:l}){return e.jsx(y.div,{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:s.map((c,t)=>e.jsx(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:t*.05,ease:"easeOut"},children:e.jsx(F,{node:c,onClick:()=>l(c.uuid),variant:"compact"})},c.uuid))})}function Me({nodes:s,onNodeClick:l}){return e.jsx(y.div,{className:"space-y-3",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:s.map((c,t)=>e.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:t*.03,ease:"easeOut"},children:e.jsx(F,{node:c,onClick:()=>l(c.uuid),variant:"table"})},c.uuid))})}function Se({nodeId:s,onClose:l}){var w;const{nodes:c,nodeStatuses:t}=A(),{themeSettings:n}=M(),{data:a}=Ne(s,24),[d,o]=h.useState("overview"),m=c.find(g=>g.uuid===s),r=t[s];if(!m)return null;const i=!!r,u=((w=r==null?void 0:r.cpu)==null?void 0:w.usage)||0,p=r?r.ram.used/r.ram.total*100:0,k=r?r.disk.used/r.disk.total*100:0,x={borderRadius:`${n.card_radius||24}px`,"--glass-blur":`${n.glass_blur||16}px`,"--glass-opacity-high":(n.glass_opacity||20)/100*.3,"--glass-opacity-low":(n.glass_opacity||20)/100*.15};return e.jsx(y.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,children:e.jsxs(y.div,{className:"glass-card w-full max-w-4xl max-h-[90vh] overflow-hidden",style:x,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${z(i)}`}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:m.name}),e.jsxs("p",{className:"text-white/60",children:[m.region," • ",m.group||"默认分组"]})]})]}),e.jsx("button",{onClick:l,className:"p-2 rounded-full bg-white/10 text-white/80 hover:text-white hover:bg-white/20 transition-all duration-200",children:e.jsx(J,{size:20})})]}),e.jsx("div",{className:"flex border-b border-white/10",children:[{key:"overview",label:"概览",icon:V},{key:"history",label:"历史数据",icon:O}].map(({key:g,label:v,icon:b})=>e.jsxs("button",{onClick:()=>o(g),className:`flex items-center space-x-2 px-6 py-4 transition-all duration-200 ${d===g?"text-white border-b-2 border-white/50":"text-white/60 hover:text-white/80"}`,children:[e.jsx(b,{size:18}),e.jsx("span",{children:v})]},g))}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[d==="overview"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"系统信息"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{size:18,className:"text-white/60"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white/60 text-sm",children:"操作系统"}),e.jsx("div",{className:"text-white",children:m.os})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Y,{size:18,className:"text-white/60"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white/60 text-sm",children:"处理器"}),e.jsxs("div",{className:"text-white",children:[m.cpu_cores," 核 ",m.cpu_name]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{size:18,className:"text-white/60"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white/60 text-sm",children:"内存"}),e.jsx("div",{className:"text-white",children:j(m.mem_total)})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(G,{size:18,className:"text-white/60"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white/60 text-sm",children:"磁盘"}),e.jsx("div",{className:"text-white",children:j(m.disk_total)})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Z,{size:18,className:"text-white/60"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white/60 text-sm",children:"虚拟化"}),e.jsx("div",{className:"text-white",children:m.virtualization})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"实时状态"}),r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"CPU 使用率"}),e.jsxs("span",{className:`font-semibold ${L(u)}`,children:[u.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(u,100)}%`}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"内存使用率"}),e.jsxs("span",{className:`font-semibold ${L(p)}`,children:[p.toFixed(1),"% (",j(r.ram.used),"/",j(r.ram.total),")"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(p,100)}%`}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"磁盘使用率"}),e.jsxs("span",{className:`font-semibold ${L(k)}`,children:[k.toFixed(1),"% (",j(r.disk.used),"/",j(r.disk.total),")"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(k,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg",children:[e.jsx(q,{size:20,className:"mx-auto mb-2 text-white/60"}),e.jsx("div",{className:"text-white/60 text-xs",children:"网络上行"}),e.jsxs("div",{className:"text-white font-semibold",children:[j(r.network.up),"/s"]})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg",children:[e.jsx(q,{size:20,className:"mx-auto mb-2 text-white/60"}),e.jsx("div",{className:"text-white/60 text-xs",children:"网络下行"}),e.jsxs("div",{className:"text-white font-semibold",children:[j(r.network.down),"/s"]})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg",children:[e.jsx(D,{size:20,className:"mx-auto mb-2 text-white/60"}),e.jsx("div",{className:"text-white/60 text-xs",children:"TCP 连接"}),e.jsx("div",{className:"text-white font-semibold",children:r.connections.tcp})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg",children:[e.jsx(D,{size:20,className:"mx-auto mb-2 text-white/60"}),e.jsx("div",{className:"text-white/60 text-xs",children:"UDP 连接"}),e.jsx("div",{className:"text-white font-semibold",children:r.connections.udp})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{size:16,className:"text-white/60"}),e.jsx("span",{className:"text-white/60 text-sm",children:"运行时间"})]}),e.jsx("span",{className:"text-white font-semibold",children:R(r.uptime)})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-white/60 mb-2",children:"节点离线"}),e.jsx("div",{className:"text-white/40 text-sm",children:"无法获取实时数据"})]})]})]})}),d==="history"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"24小时历史数据"}),a.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-white/60 text-sm",children:["共 ",a.length," 条记录"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.slice(0,6).map((g,v)=>e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-white/60 text-xs mb-2",children:new Date(g.time).toLocaleString()}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"CPU:"}),e.jsxs("span",{className:"text-white",children:[(g.cpu||0).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"内存:"}),e.jsx("span",{className:"text-white",children:g.ram_total&&g.ram_total>100?((g.ram_used||0)/g.ram_total*100).toFixed(1)+"%":(g.ram||0).toFixed(1)+"%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"磁盘:"}),e.jsx("span",{className:"text-white",children:g.disk_total&&g.disk_total>100?((g.disk_used||0)/g.disk_total*100).toFixed(1)+"%":(g.disk||0).toFixed(1)+"%"})]})]})]},v))})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-white/60 mb-2",children:"暂无历史数据"}),e.jsx("div",{className:"text-white/40 text-sm",children:"请稍后再试"})]})]})]})]})})}function $e({onClose:s,themeSettings:l,onUpdateSettings:c}){const[t,n]=h.useState(l),[a,d]=h.useState("appearance"),o=(i,u)=>{const p={...t,[i]:u};n(p),c({[i]:u})},m={borderRadius:`${l.card_radius||24}px`,"--glass-blur":`${l.glass_blur||16}px`,"--glass-opacity-high":(l.glass_opacity||20)/100*.3,"--glass-opacity-low":(l.glass_opacity||20)/100*.15},r=[{key:"appearance",label:"外观",icon:ye},{key:"background",label:"背景",icon:xe},{key:"layout",label:"布局",icon:he},{key:"performance",label:"性能",icon:I}];return e.jsx(y.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,children:e.jsxs(y.div,{className:"glass-card w-full max-w-4xl max-h-[90vh] overflow-hidden",style:m,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"主题设置"}),e.jsx("button",{onClick:s,className:"p-2 rounded-full bg-white/10 text-white/80 hover:text-white hover:bg-white/20 transition-all duration-200",children:e.jsx(J,{size:20})})]}),e.jsx("div",{className:"flex border-b border-white/10 overflow-x-auto",children:r.map(({key:i,label:u,icon:p})=>e.jsxs("button",{onClick:()=>d(i),className:`flex items-center space-x-2 px-6 py-4 whitespace-nowrap transition-all duration-200 ${a===i?"text-white border-b-2 border-white/50":"text-white/60 hover:text-white/80"}`,children:[e.jsx(p,{size:18}),e.jsx("span",{children:u})]},i))}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[a==="appearance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"外观设置"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium",children:"主题颜色"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{key:"蓝色",color:"bg-blue-500"},{key:"紫色",color:"bg-purple-500"},{key:"绿色",color:"bg-green-500"},{key:"橙色",color:"bg-orange-500"},{key:"粉色",color:"bg-pink-500"},{key:"青色",color:"bg-cyan-500"}].map(({key:i,color:u})=>e.jsxs("button",{onClick:()=>o("theme_color",i),className:`p-3 rounded-lg border-2 transition-all duration-200 ${t.theme_color===i?"border-white/50 bg-white/10":"border-white/20 hover:border-white/40"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${u} mx-auto mb-2`}),e.jsx("div",{className:"text-white/80 text-sm",children:i})]},i))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-white/80 text-sm font-medium",children:["玻璃透明度: ",t.glass_opacity||20,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:t.glass_opacity||20,onChange:i=>o("glass_opacity",parseInt(i.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer slider"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-white/80 text-sm font-medium",children:["玻璃模糊度: ",t.glass_blur||16,"px"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:t.glass_blur||16,onChange:i=>o("glass_blur",parseInt(i.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer slider"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-white/80 text-sm font-medium",children:["卡片圆角: ",t.card_radius||24,"px"]}),e.jsx("input",{type:"range",min:"8",max:"40",value:t.card_radius||24,onChange:i=>o("card_radius",parseInt(i.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer slider"})]})]}),a==="background"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"背景设置"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium",children:"桌面端背景图片 URL"}),e.jsx("input",{type:"text",value:t.bg_desktop_url||"",onChange:i=>o("bg_desktop_url",i.target.value),placeholder:"https://example.com/desktop-bg.jpg",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-white/40"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium",children:"移动端背景图片 URL"}),e.jsx("input",{type:"text",value:t.bg_mobile_url||"",onChange:i=>o("bg_mobile_url",i.target.value),placeholder:"https://example.com/mobile-bg.jpg",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-white/40"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium",children:"背景对齐方式"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["居中","拉伸","平铺","顶部","底部"].map(i=>e.jsx("button",{onClick:()=>o("bg_alignment",i),className:`p-3 rounded-lg border-2 transition-all duration-200 ${t.bg_alignment===i?"border-white/50 bg-white/10":"border-white/20 hover:border-white/40"}`,children:e.jsx("div",{className:"text-white/80 text-sm",children:i})},i))})]})]}),a==="layout"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"布局设置"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium",children:"默认视图模式"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["网格","紧凑","表格"].map(i=>e.jsx("button",{onClick:()=>o("default_view_mode",i),className:`p-3 rounded-lg border-2 transition-all duration-200 ${t.default_view_mode===i?"border-white/50 bg-white/10":"border-white/20 hover:border-white/40"}`,children:e.jsx("div",{className:"text-white/80 text-sm",children:i})},i))})]})]}),a==="performance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"性能设置"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:"启用动画效果"}),e.jsx("div",{className:"text-white/60 text-sm",children:"开启液态玻璃动画效果"})]}),e.jsx("button",{onClick:()=>o("enable_animations",!t.enable_animations),className:`relative w-12 h-6 rounded-full transition-all duration-200 ${t.enable_animations?"bg-blue-500":"bg-white/20"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all duration-200 ${t.enable_animations?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:"性能优化模式"}),e.jsx("div",{className:"text-white/60 text-sm",children:"减少动画效果以提升性能"})]}),e.jsx("button",{onClick:()=>o("performance_mode",!t.performance_mode),className:`relative w-12 h-6 rounded-full transition-all duration-200 ${t.performance_mode?"bg-orange-500":"bg-white/20"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all duration-200 ${t.performance_mode?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium",children:"外观模式"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["跟随系统","浅色模式","暗黑模式"].map(i=>e.jsx("button",{onClick:()=>o("appearance_mode",i),className:`p-3 rounded-lg border-2 transition-all duration-200 ${t.appearance_mode===i?"border-white/50 bg-white/10":"border-white/20 hover:border-white/40"}`,children:e.jsx("div",{className:"text-white/80 text-sm",children:i})},i))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-white font-medium",children:"全局统计设置"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:"显示全局网速"}),e.jsx("div",{className:"text-white/60 text-sm",children:"在顶栏显示所有服务器的网速总和"})]}),e.jsx("button",{onClick:()=>o("show_global_speed",!t.show_global_speed),className:`relative w-12 h-6 rounded-full transition-all duration-200 ${t.show_global_speed?"bg-blue-500":"bg-white/20"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all duration-200 ${t.show_global_speed?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:"显示全局流量"}),e.jsx("div",{className:"text-white/60 text-sm",children:"在顶栏显示所有服务器的流量总和"})]}),e.jsx("button",{onClick:()=>o("show_global_traffic",!t.show_global_traffic),className:`relative w-12 h-6 rounded-full transition-all duration-200 ${t.show_global_traffic?"bg-blue-500":"bg-white/20"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all duration-200 ${t.show_global_traffic?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium",children:"网速单位"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["MB/s","Mbps"].map(i=>e.jsx("button",{onClick:()=>o("speed_unit",i),className:`p-3 rounded-lg border-2 transition-all duration-200 ${t.speed_unit===i?"border-white/50 bg-white/10":"border-white/20 hover:border-white/40"}`,children:e.jsx("div",{className:"text-white/80 text-sm",children:i})},i))})]})]})]})]})]})})}function Ce(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900",children:e.jsxs(y.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx(y.div,{className:"w-16 h-16 mx-auto mb-8 rounded-full bg-gradient-to-r from-blue-400 to-purple-500",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsx(y.h2,{className:"text-2xl font-bold text-white mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Komari Monitor"}),e.jsx(y.p,{className:"text-white/70",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"正在加载监控数据..."}),e.jsx(y.div,{className:"mt-8 flex justify-center space-x-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},children:[0,1,2].map(s=>e.jsx(y.div,{className:"w-2 h-2 bg-white/50 rounded-full",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:s*.2}},s))})]})})}function ze(){const{themeSettings:s}=M(),[l,c]=h.useState(!1);return h.useEffect(()=>{const t=()=>{c(window.innerWidth<=768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),h.useEffect(()=>{const t=document.body,n=document.documentElement,a=l?s.bg_mobile_url:s.bg_desktop_url;if(a)if(l)n.style.backgroundImage=`url(${a})`,n.style.backgroundSize="cover",n.style.backgroundPosition="center",n.style.backgroundRepeat="no-repeat",n.style.backgroundAttachment="fixed",n.style.minHeight="100vh",n.style.minHeight="100dvh",t.style.backgroundImage="none",t.style.backgroundColor="transparent";else{t.style.backgroundImage=`url(${a})`,t.style.backgroundAttachment="fixed";const d={居中:"bg-alignment-center",拉伸:"bg-alignment-stretch",平铺:"bg-alignment-tile",顶部:"bg-alignment-top",底部:"bg-alignment-bottom"};Object.values(d).forEach(m=>{t.classList.remove(m)});const o=d[s.bg_alignment||"居中"];o&&t.classList.add(o),n.style.backgroundImage="none"}else l?(n.style.backgroundImage="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",n.style.backgroundSize="cover",n.style.backgroundPosition="center",n.style.backgroundRepeat="no-repeat",n.style.backgroundAttachment="fixed",t.style.backgroundImage="none",t.style.backgroundColor="transparent"):(t.style.backgroundImage="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",t.style.backgroundSize="cover",t.style.backgroundPosition="center",t.style.backgroundRepeat="no-repeat",t.style.backgroundAttachment="fixed",n.style.backgroundImage="none");return()=>{t.style.backgroundImage="",t.style.backgroundSize="",t.style.backgroundPosition="",t.style.backgroundRepeat="",t.style.backgroundAttachment="",t.style.backgroundColor="",n.style.backgroundImage="",n.style.backgroundSize="",n.style.backgroundPosition="",n.style.backgroundRepeat="",n.style.backgroundAttachment="",n.style.minHeight=""}},[s.bg_desktop_url,s.bg_mobile_url,s.bg_alignment,l]),null}function Ee(){const{themeSettings:s}=M();return h.useEffect(()=>{let l=null,c=window.scrollY;const t=()=>{const a=window.scrollY,d=Math.abs(a-c);if(d>5){const o=Math.min(d/10,1),m=a*.8%360,r=Math.min(.4+o*.5,.8);document.documentElement.style.setProperty("--scroll-angle",`${m}deg`),document.documentElement.style.setProperty("--refraction-opacity",String(r));const i=document.querySelectorAll(".glass-card");i.forEach(u=>{u.classList.add("scrolling")}),l&&window.clearTimeout(l),l=window.setTimeout(()=>{i.forEach(u=>{u.classList.remove("scrolling")}),document.documentElement.style.setProperty("--refraction-opacity","0.6")},300),c=a}},n=a=>{const d=a.clientX/window.innerWidth*100,o=a.clientY/window.innerHeight*100;document.documentElement.style.setProperty("--mouse-x",`${d}%`),document.documentElement.style.setProperty("--mouse-y",`${o}%`)};return s.enable_animations!==!1&&!s.performance_mode&&(window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("mousemove",n,{passive:!0})),()=>{window.removeEventListener("scroll",t),window.removeEventListener("mousemove",n),l&&window.clearTimeout(l)}},[s.enable_animations,s.performance_mode]),null}function Le(){const{themeSettings:s}=M();return h.useEffect(()=>{const l=()=>{const n=s.appearance_mode||"跟随系统",a=document.body;switch(a.classList.remove("light","dark"),n){case"浅色模式":a.classList.add("light");break;case"暗黑模式":a.classList.add("dark");break;case"跟随系统":default:const d=window.matchMedia("(prefers-color-scheme: dark)").matches;a.classList.add(d?"dark":"light");break}};l();const c=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{(s.appearance_mode==="跟随系统"||!s.appearance_mode)&&l()};return c.addEventListener("change",t),()=>{c.removeEventListener("change",t)}},[s.appearance_mode]),null}function Pe({wsConnected:s,isReconnecting:l}){const{themeSettings:c}=M(),[t,n]=h.useState(!1),[a,d]=h.useState(!1),[o,m]=h.useState(!0);h.useEffect(()=>{!s&&o?(n(!0),m(!1)):s&&!o&&(n(!1),d(!1),m(!0),d(!0),setTimeout(()=>{d(!1)},3e3))},[s,o]),h.useEffect(()=>{l&&!s&&d(!0)},[l,s]);const r={borderRadius:`${c.card_radius||24}px`};return e.jsxs(e.Fragment,{children:[e.jsx($,{children:t&&e.jsx(y.div,{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[9999]",initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{duration:.3,ease:"easeOut"},children:e.jsxs("div",{className:"glass-card px-6 py-4 flex items-center space-x-3 shadow-lg",style:r,children:[e.jsx(be,{size:20,className:"text-red-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:"网络连接已断开"}),e.jsx("div",{className:"text-white/60 text-sm",children:"正在尝试重新连接..."})]}),e.jsx(y.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(H,{size:16,className:"text-white/60"})})]})})}),e.jsx($,{children:a&&s&&e.jsx(y.div,{className:"fixed top-4 right-4 z-[9999]",initial:{opacity:0,x:50,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.9},transition:{duration:.3,ease:"easeOut"},children:e.jsxs("div",{className:"glass-card px-6 py-4 flex items-center space-x-3 shadow-lg",style:r,children:[e.jsx(je,{size:20,className:"text-green-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:"网络已恢复"}),e.jsx("div",{className:"text-white/60 text-sm",children:"连接已重新建立"})]})]})})}),e.jsx($,{children:l&&!s&&e.jsx(y.div,{className:"fixed top-4 right-4 z-[9999]",initial:{opacity:0,x:50,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.9},transition:{duration:.3,ease:"easeOut"},children:e.jsxs("div",{className:"glass-card px-6 py-4 flex items-center space-x-3 shadow-lg",style:r,children:[e.jsx(y.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:e.jsx(H,{size:20,className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:"正在重连"}),e.jsx("div",{className:"text-white/60 text-sm",children:"请稍候..."})]})]})})})]})}function Te({nodeStatuses:s,isMobile:l}){const{themeSettings:c}=M(),t=h.useMemo(()=>{const a=Object.values(s),d=a.reduce((i,u)=>{var p;return i+(((p=u.network)==null?void 0:p.up)||0)},0),o=a.reduce((i,u)=>{var p;return i+(((p=u.network)==null?void 0:p.down)||0)},0),m=a.reduce((i,u)=>{var p;return i+(((p=u.network)==null?void 0:p.totalUp)||0)},0),r=a.reduce((i,u)=>{var p;return i+(((p=u.network)==null?void 0:p.totalDown)||0)},0);return{totalUpSpeed:d,totalDownSpeed:o,totalUpTraffic:m,totalDownTraffic:r}},[s]),n=a=>(c.speed_unit||"MB/s")==="Mbps"?`${(a*8/1e6).toFixed(2)} Mbps`:`${(a/1048576).toFixed(2)} MB/s`;return!c.show_global_speed&&!c.show_global_traffic?null:e.jsxs("div",{className:`text-xs text-white/60 ${l?"space-y-1":"flex items-center space-x-4"}`,children:[c.show_global_speed&&e.jsxs("div",{className:l?"text-center":"",children:[e.jsx("span",{children:"全局网速: "}),e.jsxs("span",{className:"text-white/80",children:["↑",n(t.totalUpSpeed)," ↓",n(t.totalDownSpeed)]})]}),c.show_global_traffic&&e.jsxs("div",{className:l?"text-center":"",children:[e.jsx("span",{children:"全局流量: "}),e.jsxs("span",{className:"text-white/80",children:["↑",j(t.totalUpTraffic)," ↓",j(t.totalDownTraffic)]})]})]})}function Oe(){const[s,l]=h.useState(!1);return h.useEffect(()=>{const c=()=>{const t=window.innerWidth,n=window.devicePixelRatio||1,a=t<768||t<1024&&n>1.5;l(a)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),s}function Re(){const{themeSettings:s,updateThemeSettings:l,publicConfig:c}=M(),{nodes:t,isLoading:n,wsConnected:a,isReconnecting:d,nodeStatuses:o}=A(),[m,r]=h.useState("grid"),[i,u]=h.useState(null),[p,k]=h.useState(!1),x=Oe(),w=()=>{const b=s.appearance_mode||"跟随系统";let N="";switch(b){case"跟随系统":N="浅色模式";break;case"浅色模式":N="暗黑模式";break;case"暗黑模式":N="跟随系统";break;default:N="跟随系统"}l({appearance_mode:N})},g=()=>{switch(s.appearance_mode||"跟随系统"){case"浅色模式":return we;case"暗黑模式":return pe;default:return ue}};h.useEffect(()=>{const b=localStorage.getItem("nodeViewMode");b&&["grid","compact","table"].includes(b)?r(b):s.default_view_mode&&r({网格:"grid",紧凑:"compact",表格:"table"}[s.default_view_mode]||"grid")},[s.default_view_mode]);const v=b=>{P.startTransition(()=>{r(b),localStorage.setItem("nodeViewMode",b)})};return n?e.jsx(Ce,{}):e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx(ze,{}),e.jsx(Ee,{}),e.jsx(Le,{}),e.jsx(y.header,{className:`glass-card sticky top-0 z-30 mx-4 mt-4 ${x?"p-3":"p-4"}`,style:{borderRadius:`${s.card_radius||24}px`,"--glass-blur":`${s.glass_blur||16}px`,"--glass-opacity-high":(s.glass_opacity||20)/100*.25,"--glass-opacity-low":(s.glass_opacity||20)/100*.1},initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,ease:"easeOut"},children:e.jsxs("div",{className:`${x?"space-y-3":"flex items-center justify-between"}`,children:[e.jsxs("div",{className:`${x?"space-y-2":"flex items-center space-x-4"}`,children:[e.jsx(y.h1,{className:`${x?"text-xl":"text-2xl"} font-bold text-white`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:(c==null?void 0:c.sitename)||"Komari Monitor"}),e.jsxs(y.div,{className:`${x?"space-y-1":"flex items-center space-x-2"} text-sm text-white/70`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:[e.jsxs("div",{className:`${x?"text-center":"flex items-center space-x-2"}`,children:[e.jsx("span",{children:x?`${t.length} 台服务器`:`${t.length} 台服务器，在线 ${Object.keys(o).length} 台，离线 ${t.length-Object.keys(o).length} 台`}),e.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-400":"bg-red-400"} ${x?"mx-auto mt-1":""}`})]}),x&&e.jsxs("div",{className:"text-center text-xs",children:["在线 ",Object.keys(o).length," 台，离线 ",t.length-Object.keys(o).length," 台"]}),e.jsx(Te,{nodeStatuses:o,isMobile:x})]})]}),e.jsxs("div",{className:`${x?"grid grid-cols-2 gap-3":"flex items-center space-x-3"}`,children:[e.jsx("div",{className:`glass-card rounded-full p-1 ${x?"justify-self-start":""}`,children:e.jsx("div",{className:"flex items-center space-x-1",children:[{mode:"grid",icon:de,label:"网格"},{mode:"compact",icon:me,label:"紧凑"},{mode:"table",icon:V,label:"表格"}].map(({mode:b,icon:N,label:C})=>e.jsx(y.button,{onClick:()=>v(b),className:`${x?"p-1.5":"p-2"} rounded-full transition-all duration-200 ${m===b?"glass-button text-white":"text-white/60 hover:text-white/80 hover:bg-white/10"}`,whileHover:{scale:1.05},whileTap:{scale:.95},title:C,children:e.jsx(N,{size:x?14:18})},b))})}),e.jsxs("div",{className:`flex items-center ${x?"space-x-1 justify-self-end":"space-x-3"}`,children:[e.jsx(y.button,{onClick:w,className:`glass-card ${x?"p-1.5":"p-2"} rounded-full text-white/80 hover:text-white transition-all duration-200`,whileHover:{scale:1.05},whileTap:{scale:.95},title:`当前: ${s.appearance_mode||"跟随系统"}`,children:P.createElement(g(),{size:x?14:18})}),e.jsx(y.button,{onClick:()=>k(!0),className:`glass-card ${x?"p-1.5":"p-2"} rounded-full text-white/80 hover:text-white transition-all duration-200`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"主题设置",children:e.jsx(ge,{size:x?14:18})}),e.jsx(y.button,{onClick:()=>window.open("/admin","_blank"),className:`glass-card ${x?"p-1.5":"p-2"} rounded-full text-white/80 hover:text-white transition-all duration-200`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"管理面板",children:e.jsx(fe,{size:x?14:18})})]})]})]})}),e.jsx("main",{className:"p-4 pb-8",children:e.jsxs($,{mode:"wait",children:[m==="grid"&&e.jsx(ke,{nodes:t,onNodeClick:u},"grid"),m==="compact"&&e.jsx(_e,{nodes:t,onNodeClick:u},"compact"),m==="table"&&e.jsx(Me,{nodes:t,onNodeClick:u},"table")]})}),e.jsx($,{children:i&&e.jsx(Se,{nodeId:i,onClose:()=>u(null)})}),e.jsx($,{children:p&&e.jsx($e,{onClose:()=>k(!1),themeSettings:s,onUpdateSettings:l})}),e.jsx("footer",{className:"text-center py-4 text-white/50 text-sm",children:"Powered by Komari Monitor."}),e.jsx(Pe,{wsConnected:a,isReconnecting:d})]})}function Ie(){return e.jsx(ve,{children:e.jsx(Re,{})})}T.createRoot(document.getElementById("root")).render(e.jsx(P.StrictMode,{children:e.jsx(Ie,{})}));
